---
tags:
  - 개발
  - 기술정리
  - Redis
  - KeyDesign
created: 2025-05-13
type: 기술정리
aliases:
  - Redis 키 설계
  - Redis 데이터 모델링
  - Redis 설계 고려사항
---

# 📘 Redis 설계 관점에서의 데이터 모델링

[[MySQL]]이나 [[PostgreSQL]] 같은 전통적인 [[RDBMS]]는 먼저 테이블을 설계하고, 그에 맞춰 SQL 쿼리를 작성하는 방식이다.

하지만 [[Redis]]는 이런 RDBMS 방식과는 설계 초점이 다르다. Redis는 스키마가 없는 [[In-Memory Database]]로, 데이터를 어떻게 사용할지에 따라 먼저 **저장할 데이터의 구조와 만료 정책, 접근 방식**을 정의하고 그에 맞는 **데이터 타입과 명령어**를 선택한다.

예를 들어, Redis를 이미지 캐싱 서비스로 사용하려고 할 경우, 먼저 다음과 같은 질문을 던져야 한다:

---

## 🔍 설계 시 고려사항

- **어떤 형태의 데이터를 저장할 것인가?**  
  (예: 문자열, 해시, 리스트, 집합 등)

- **데이터의 크기에 대한 고려가 필요한가?**  
  (예: 이미지 썸네일 등은 용량이 클 수 있음)

- **이 데이터는 만료되어야 하는가? (TTL 설정)**  
  (예: 캐시 데이터는 일반적으로 자동 만료가 필요함)

- **키(Key) 네이밍 정책은 어떻게 설정할 것인가?**  
  (일관되고 명확해야 유지보수가 용이함)

- **비즈니스 로직에서 따로 고려해야 할 요소는 무엇인가?**  
  (예: 사용자별 캐시 분리, 우선순위 캐시 등)

---

## 🧩 Redis 키 네이밍 전략

### ✅ 1. Key는 고유해야 한다

캐시하려는 데이터가 4건이라면 각각 고유한 Key 4개가 있어야 한다. 그렇지 않으면 데이터가 덮어쓰기되어 의도치 않은 결과를 초래할 수 있다.

### ✅ 2. Key를 보고도 데이터의 용도를 알 수 있도록 한다

타 개발자나 운영자가 Redis Key를 봤을 때 그 목적을 쉽게 추론할 수 있어야 한다.

### ✅ 3. `:` 기호를 사용한 네임스페이스 분리 (가장 권장됨)

Redis 커뮤니티에서 가장 일반적으로 사용하는 키 네이밍 방식은 `:`을 구분자로 사용하는 방법이다.

예시:
- `user:45` → 사용자 ID 45의 프로필 정보
- `user:posts:901` → 사용자 게시글 ID 901

이처럼 `app:module:resource:id` 형태로 네임스페이스를 분리하는 것이 일반적이다.

> ℹ️ Redis 공식 문서에서는 `:`을 사용한 키 네이밍을 직접적으로 강제하지는 않지만, **가독성과 유지보수를 위해 명확한 네이밍 규칙을 권장**하고 있으며, 공식 예제 대부분이 이 방식을 따른다.  
> 참고: [Redis Key Names - 공식 문서](https://redis.io/blog/5-key-takeaways-for-developing-with-redis/)

### ⚠️ 4. `#` 기호 사용은 비권장

일부 개발자들이 `#` 기호를 사용하는 경우도 있으나, Redis 공식 문서나 커뮤니티 관례에서는 이를 추천하지 않는다. 특별한 사유가 없다면 `:` 방식으로 일관성을 유지하는 것이 좋다.

---

## 🧠 고급 설계 팁

- **접두어/접미어 전략**: `cache:thumb:user:45`처럼 키 앞에 목적을 명시하면 검색/모니터링에 용이
- **TTL 설정 권장**: 캐시 데이터에는 항상 `EXPIRE` 또는 `SETEX` 등을 활용해 유효기간 설정
- **키 길이 최소화**: Redis는 메모리 기반 DB이므로 키 자체도 너무 길면 메모리 낭비

---

## 🔗 관련 문서

- [[Redis 기초 정리]]
- [[In-Memory Database (IMDB)]]
- [[Key-Value Store]]
- [[RDBMS vs Redis]]
